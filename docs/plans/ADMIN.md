# 관리자 페이지 기획

> Morgan Edition - 관리자 페이지 설계
> 기반: vn_engine 관리자 + 현재 기획에 맞춰 수정

> ⚠️ **스키마 참조**: 최종 테이블 구조는 [PLAN_DB.md](./PLAN_DB.md) 참조

---

## 개요

- **UI**: Tailwind CSS, 디스코드 스타일 다크 테마
- **설정 방식**: 분산형 (각 기능 관리 페이지에 해당 설정 포함)
- **권한**: 관리자 / 스태프 (체크박스 권한 부여)

---

## 1. 메뉴 구조

### 1.1 관리자 전용 메뉴

```
관리자 (/adm)
├── 대시보드 (/adm)
│
├── 회원관리
│   ├── 회원 목록 (/adm/member)
│   ├── 회원 설정 (/adm/member/config)
│   └── 권한 관리 (/adm/auth)  ★ 관리자 전용
│
├── 캐릭터관리
│   ├── 캐릭터 목록 (/adm/character)
│   ├── 승인 대기 (/adm/character/pending)
│   ├── 프로필 양식 (/adm/character/field)
│   ├── 세력 관리 (/adm/side)
│   ├── 종족 관리 (/adm/class)
│   └── 캐릭터 설정 (/adm/character/config)
│
├── 게시판관리
│   ├── 게시판 목록 (/adm/board)  ★ 추가/복사는 관리자 전용
│   ├── 게시판 그룹 (/adm/board/group)  ★ 관리자 전용
│   └── 게시판 설정 (/adm/board/config)  ★ 관리자 전용
│
├── 역극관리
│   ├── 역극 목록 (/adm/rp)
│   └── 역극 설정 (/adm/rp/config)
│
├── 포인트관리
│   ├── 포인트 내역 (/adm/point)
│   ├── 포인트 지급 (/adm/point/give)
│   ├── 출석/미니게임 설정 (/adm/point/game)
│   └── 포인트 설정 (/adm/point/config)
│
├── 상점관리
│   ├── 상품 목록 (/adm/shop)
│   ├── 상품 등록 (/adm/shop/create)
│   ├── 카테고리 관리 (/adm/shop/category)
│   ├── 구매/선물 내역 (/adm/shop/log)
│   └── 상점 설정 (/adm/shop/config)
│
├── 문의관리
│   └── 문의 목록 (/adm/qna)
│
├── 이모티콘관리
│   ├── 이모티콘 셋 목록 (/adm/emoticon)
│   └── 이모티콘 셋 등록 (/adm/emoticon/create)
│
└── 환경설정  ★ 관리자 전용
    ├── 기본 설정 (/adm/config)
    └── 디자인 설정 (/adm/config/design)
```

### 1.2 스태프 접근 가능 메뉴

| 메뉴 | 스태프 | 관리자 |
|------|--------|--------|
| 대시보드 | O | O |
| 회원 목록/관리 | 권한별 | O |
| 권한 관리 | X | O |
| 캐릭터 목록/승인 | 권한별 | O |
| 프로필 양식/세력/종족 | 권한별 | O |
| 게시판 글 관리 | 권한별 | O |
| 게시판 추가/복사/삭제 | X | O |
| 역극 관리 | 권한별 | O |
| 포인트 관리 | 권한별 | O |
| 상점 관리 | 권한별 | O |
| 문의 관리 | 권한별 | O |
| 환경설정 | X | O |

---

## 2. 대시보드

### 2.1 표시 항목

| 항목 | 설명 |
|------|------|
| 오늘 가입자 수 | 신규 회원 |
| 오늘 글 수 | 게시판별 표시 |
| 승인 대기 캐릭터 | 캐릭터 pending 수 |
| 미답변 문의 | 문의 게시판 latest (답변 없는 것만) |

### 2.2 대시보드 레이아웃

```
┌─────────────────────────────────────────────────────────────┐
│  대시보드                                                   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐    │
│  │ 오늘가입 │  │ 승인대기 │  │ 오늘 글  │  │ 미답변   │    │
│  │    3     │  │    5     │  │   24     │  │    2     │    │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘    │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  오늘 게시판별 글 수                                        │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 공지사항: 1 │ 로그: 8 │ 오너게시판: 12 │ 역극: 3    │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  미답변 문의                                    [전체보기]  │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ [비밀글] 문의드립니다          user123    02-03 10:30│   │
│  │ [비밀글] 캐릭터 승인 관련...    user456    02-03 09:15│   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 3. 권한 관리

### 3.1 권한 테이블 (staff_auth)

| 필드 | 타입 | 설명 |
|------|------|------|
| sa_id | int AUTO_INCREMENT | PK |
| mb_id | varchar(20) | 스태프 회원 ID |
| sa_permissions | text | 권한 목록 (JSON) |
| sa_datetime | datetime | 등록일 |

### 3.2 권한 항목

| 권한 코드 | 설명 |
|----------|------|
| member | 회원 관리 |
| character | 캐릭터 관리/승인 |
| character_field | 프로필 양식 관리 |
| side_class | 세력/종족 관리 |
| board | 게시판 글 관리 |
| rp | 역극 관리 |
| point | 포인트 관리 |
| shop | 상점 관리 |
| qna | 문의 관리 |

### 3.3 권한 설정 UI

```
┌─────────────────────────────────────────────────────────────┐
│  스태프 권한 설정: user123                                   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ☑ 회원 관리                                               │
│  ☑ 캐릭터 관리/승인                                        │
│  ☐ 프로필 양식 관리                                        │
│  ☐ 세력/종족 관리                                          │
│  ☑ 게시판 글 관리                                          │
│  ☑ 역극 관리                                               │
│  ☐ 포인트 관리                                             │
│  ☐ 상점 관리                                               │
│  ☑ 문의 관리                                               │
│                                                             │
│                                          [저장]  [취소]     │
└─────────────────────────────────────────────────────────────┘
```

### 3.4 권한 데이터 예시

```json
{
  "member": true,
  "character": true,
  "character_field": false,
  "side_class": false,
  "board": true,
  "rp": true,
  "point": false,
  "shop": false,
  "qna": true
}
```

---

## 4. 설정 분산 구조

각 관리 페이지에 해당 설정 포함:

| 관리 페이지 | 포함 설정 |
|------------|----------|
| 회원관리 | 가입 허용, 닉네임 변경 주기, CAPTCHA |
| 캐릭터관리 | 세력/종족 사용, 필수 여부, 명칭 |
| 게시판관리 | 기본 포인트, 파일 업로드 제한 |
| 역극관리 | 판 세우기 조건, 최대 참여자 |
| 포인트관리 | 재화 명칭, 미니게임 설정 |
| 상점관리 | (상품별 개별 설정) |
| 환경설정 | 사이트명, 로고, 파비콘, 디자인 |

---

## 5. 환경설정 (관리자 전용)

### 5.1 기본 설정

| 항목 | 설명 |
|------|------|
| 사이트명 | 사이트 제목 |
| 로고 | 헤더 로고 이미지 |
| 파비콘 | 브라우저 아이콘 |
| 사이트 설명 | 메타 태그 |
| 관리자 이메일 | 시스템 메일 발신 |

### 5.2 디자인 설정

| 항목 | 설명 |
|------|------|
| 테마 선택 | 설치된 테마 목록에서 선택 |
| 메인 컬러 | 테마 색상 (선택한 테마 오버라이드 가능) |
| 기본 로고 | 이미지 없는 게시글 대체 이미지 |

**테마 선택 UI**

```
┌─────────────────────────────────────────────────────────────┐
│  디자인 설정                                                 │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  테마 선택                                                   │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐            │
│  │ [미리보기] │  │ [미리보기] │  │ [미리보기] │            │
│  │  Default   │  │ Ocean Blue │  │   Custom   │            │
│  │    ✓      │  │            │  │            │            │
│  └────────────┘  └────────────┘  └────────────┘            │
│                                                             │
│  메인 컬러 (테마 기본값 오버라이드)                          │
│  [#f59f0a___] [🎨]  □ 테마 기본값 사용                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 6. 관리자 UI 레이아웃

### 6.1 전체 구조

```
┌─────────────────────────────────────────────────────────────┐
│  [로고]  Morgan Edition 관리자          [내 정보] [로그아웃] │
├────────────┬────────────────────────────────────────────────┤
│            │                                                │
│  사이드바   │  메인 컨텐츠 영역                              │
│            │                                                │
│  대시보드   │                                                │
│  ─────────│                                                │
│  회원관리   │                                                │
│  캐릭터관리 │                                                │
│  게시판관리 │                                                │
│  역극관리   │                                                │
│  포인트관리 │                                                │
│  상점관리   │                                                │
│  문의관리   │                                                │
│  ─────────│                                                │
│  환경설정   │                                                │
│            │                                                │
└────────────┴────────────────────────────────────────────────┘
```

### 6.2 디자인 원칙

- 디스코드 스타일 다크 테마
- 좌측 고정 사이드바
- Tailwind CSS 기반
- 아이콘 + 텍스트 메뉴
- 반응형 (모바일: 햄버거 메뉴)

---

## 7. vn_engine 참고 사항

개발 시 vn_engine 관리자 코드 참고하되, 현재 기획(md 파일)과 비교하여:

1. **구조가 다른 부분**: 새로 작성
2. **기능이 같은 부분**: 모던화하여 마이그레이션
3. **제거된 기능**: 스킵 (스탯, 게임 요소 등)
4. **추가된 기능**: 새로 구현 (역극, 미니게임 등)

---

## 8. TODO

- [ ] 관리자 레이아웃 UI 설계
- [ ] 대시보드 위젯 상세 설계
- [ ] 권한 관리 UI 구현
- [ ] 각 관리 페이지 설정 탭 설계

---

*작성일: 2026-02-03*
*수정일: 2026-02-03*
*상태: 1차 기획 완료, 문서 검토 완료*
