# Morgan Edition 관리자 가이드

> 이 문서는 Morgan Edition CMS의 관리자 페이지 사용법을 설명합니다.
> 스크린샷은 `test_screenshots/admin/` 디렉터리에 있습니다.

---

## 1. 설정

### 1-1. 대시보드
- **파일**: `dashboard.php`
- **스크린샷**: `01_dashboard.png`
- **설명**: 사이트 전체 현황을 한눈에 파악하는 메인 페이지입니다. 회원 수, 승인 대기, 진행 중 역극, 포인트, 정산 대기 등 10개 통계 카드와 승인 요청, 정산 대기, 미션 검수, 최신 게시글, 역극, 포인트, 구매 내역, 업적 등 8개 위젯을 표시합니다.

### 1-2. 기본 설정 (기본 설정 탭)
- **파일**: `config.php?tab=basic`
- **스크린샷**: `02_config_basic.png`
- **설명**: 사이트명, 로고, 포인트(로그인/출석/캐릭터 생성 비용), 최대 캐릭터 수, 접속자 표시, reCAPTCHA v3, 파일 업로드 제한을 설정합니다.
- **의존**: 최고관리자 권한 필수. 여기서 설정한 값이 사이트 전체에 반영됩니다.

### 1-3. 기본 설정 (회원 관리 탭)
- **파일**: `config.php?tab=member`
- **스크린샷**: `03_config_member.png`
- **설명**: 닉네임 변경 주기, 가입 기본 레벨, 기능별 최소 레벨(역극/의뢰/개척/인장/이모티콘/미션)을 설정합니다. 레벨 미달 회원은 해당 기능에 접근할 수 없습니다.
- **의존**: 회원 레벨 체계가 먼저 이해되어야 합니다.

### 1-4. 기본 설정 (컨텐츠 설정 탭)
- **파일**: `config.php?tab=content`
- **스크린샷**: `04_config_content.png`
- **설명**: 캐릭터, 역극, 이모티콘, 인장, 개척, 위키, 미션, 의뢰 등 Morgan 기능의 ON/OFF와 세부 옵션을 설정합니다. 사용하지 않는 기능은 여기서 끄면 사이드바와 관련 UI에서 숨겨집니다.
- **의존**: 각 기능을 사용하려면 반드시 여기서 먼저 활성화해야 합니다.

### 1-5. 디자인 관리
- **파일**: `design.php`
- **스크린샷**: `05_design.png`
- **설명**: 사이트 폰트(18종 한국어 Google 폰트), 콘텐츠 최대 너비, 배경 이미지를 설정합니다. 메인 빌더 탭에서는 드래그앤드롭으로 메인 페이지 위젯을 배치합니다.
- **의존**: 최고관리자 권한 필수.

### 1-6. 스태프 관리
- **파일**: `staff.php`
- **스크린샷**: `06_staff.png`
- **설명**: 운영진 역할(Role)을 정의하고 회원에게 배정하는 RBAC 관리 페이지입니다. 역할마다 색상 뱃지와 메뉴별 권한을 설정하며, 한 회원에게 여러 역할을 부여할 수 있습니다.

---

## 2. 세계관

### 2-1. 위키 관리
- **파일**: `lore_wiki.php`
- **스크린샷**: `07_lore_wiki.png`
- **설명**: 세계관 위키의 카테고리와 문서를 관리합니다. 카테고리 추가/수정, 문서 작성/편집, 드래그앤드롭 순서 관리를 지원합니다.
- **의존**: 컨텐츠 설정에서 "세계관 위키" 사용 설정 필요.

### 2-2. 타임라인
- **파일**: `lore_timeline.php`
- **스크린샷**: `08_lore_timeline.png`
- **설명**: 세계관 연대기를 시대(Era)와 이벤트 2계층으로 관리합니다. 시대 안에 이벤트를 추가하고, 연도/이미지/위키 문서 연결을 설정합니다.
- **의존**: 위키 문서를 먼저 작성하면 이벤트에 연결할 수 있습니다(선택사항).

### 2-3. 지도
- **파일**: `lore_map.php`
- **스크린샷**: `09_lore_map.png`
- **설명**: 세계관 지도 이미지를 업로드하고 지역 마커를 배치합니다. 지역 추가 후 맵 에디터에서 클릭/드래그로 위치를 지정합니다.
- **의존**: 지도 이미지를 먼저 업로드해야 마커를 배치할 수 있습니다.

---

## 3. 회원 / 캐릭터

### 3-1. 회원 관리
- **파일**: `member_list.php`
- **스크린샷**: `10_member_list.png`
- **설명**: 전체 회원 목록을 조회하고 개별 수정합니다. 아이디/닉네임/이메일 검색, 상태(정상/탈퇴/차단) 표시, 캐릭터 보유 수를 확인합니다.

### 3-2. 캐릭터 관리
- **파일**: `character_list.php`
- **스크린샷**: `11_character_list.png`
- **설명**: 등록된 캐릭터 목록을 조회하고 승인/반려/삭제를 처리합니다. 상태별 필터링과 일괄 처리(선택 승인/반려/삭제) 기능을 제공합니다.

### 3-3. 프로필 필드 관리
- **파일**: `profile_field.php`
- **스크린샷**: `12_profile_field.png`
- **설명**: 캐릭터 프로필에 표시될 커스텀 필드를 섹션 단위로 관리합니다. 텍스트/선택/URL/이미지 등 다양한 타입의 필드를 추가하여 캐릭터 시트를 구성합니다.

### 3-4. 소속/유형 관리
- **파일**: `side_class.php`
- **스크린샷**: `13_side_class.png`
- **설명**: 캐릭터의 소속(세력/진영)과 유형(종족/직업)을 관리합니다. 유형을 특정 소속에 종속시키거나 공용으로 설정할 수 있습니다.
- **의존**: 컨텐츠 설정에서 소속/유형 시스템 사용 설정 권장.

### 3-5. 관계 관리
- **파일**: `relation.php`
- **스크린샷**: `14_relation.png`
- **설명**: 캐릭터 간의 관계(교우, 적대, 연인 등)를 관리합니다. 유저가 신청한 관계의 승인 대기 건을 처리하고 상태별로 조회합니다.
- **의존**: 캐릭터가 등록되어 있어야 합니다.

### 3-6. 인장 관리
- **파일**: `seal.php`
- **스크린샷**: `15_seal.png`
- **설명**: 회원별 인장(시그니처 카드)의 활성/비활성을 토글하고, 내용 리셋이나 삭제를 수행합니다. 미리보기 모달에서 렌더링된 인장을 확인합니다.
- **의존**: 컨텐츠 설정에서 "인장 시스템" 사용 설정 필요.

---

## 4. 활동

### 4-1. 출석 관리
- **파일**: `attendance.php`
- **스크린샷**: `16_attendance.png`
- **설명**: 출석체크 보상과 미니게임(주사위/운세/룰렛)을 관리합니다. 연속 출석 보너스, 게임별 세부 설정(주사위 콤보, 운세 확률, 룰렛 보드), 출석 통계를 5개 탭으로 관리합니다.

### 4-2. 알림 관리
- **파일**: `notification.php`
- **스크린샷**: `17_notification.png`
- **설명**: 시스템에서 발생한 모든 알림을 조회하고 일괄 처리합니다. 26가지 이상의 알림 유형을 필터링하여 관리할 수 있습니다.

### 4-3. 업적 관리
- **파일**: `achievement.php`
- **스크린샷**: `18_achievement.png`
- **설명**: 업적을 정의하고 회원별 달성 현황을 관리합니다. 일반/단계형 업적 생성, 자동 트리거 조건 설정, 수동 부여가 가능합니다.

---

## 5. 콘텐츠

### 5-1. 역극 관리
- **파일**: `rp_list.php`
- **스크린샷**: `19_rp_list.png`
- **설명**: 역극(RP) 스레드 목록을 조회하고 상태(진행중/완결/삭제)를 인라인으로 변경합니다. 통계 카드에서 전체/진행중/완결/이음 수를 확인합니다.
- **의존**: 컨텐츠 설정에서 "역극 기능" 사용 설정 필요.

### 5-2. 게시판 관리
- **파일**: `board_list.php`
- **스크린샷**: `20_board_list.png`
- **설명**: 사이트에 등록된 게시판 목록을 조회하고 개별 설정(스킨, 레벨, 정렬, 검색 노출)을 관리합니다.

### 5-3. 미션 관리
- **파일**: `prompt.php`
- **스크린샷**: `21_prompt.png`
- **설명**: 관리자가 출제하는 미션을 관리하고 유저 제출물을 검수합니다. 미션 CRUD와 제출물 승인/반려를 한 페이지에서 처리합니다.
- **의존**: 컨텐츠 설정에서 "미션 시스템" 사용 설정 필요. 미션 제출 대상 게시판이 존재해야 합니다.

### 5-4. 의뢰 관리
- **파일**: `concierge.php`
- **스크린샷**: `22_concierge.png`
- **설명**: 유저 간 의뢰 매칭 시스템을 관리합니다. 기한 초과 자동 만료, 상태별 조회, 관리자 강제 개입(취소/강제완료/강제종료) 기능을 제공합니다.
- **의존**: 컨텐츠 설정에서 "의뢰 시스템" 사용 설정 필요.

---

## 6. 재화 / 상점

### 6-1. 포인트 관리
- **파일**: `point_manage.php`
- **스크린샷**: `23_point_manage.png`
- **설명**: 포인트 명칭/단위를 설정하고, 특정 회원에게 포인트를 직접 지급하며, 발급 이력을 조회합니다.

### 6-2. 보상 관리
- **파일**: `reward.php`
- **스크린샷**: `24_reward.png`
- **설명**: 게시판별 글쓰기/댓글 보상과 재료 드롭, 역극 보상(생성 비용/이음/완결), 좋아요 보상을 설정합니다.
- **의존**: 게시판이 등록되어 있어야 게시판별 보상을 설정할 수 있습니다.

### 6-3. 상점 관리
- **파일**: `shop_item_list.php`
- **스크린샷**: `25_shop_item_list.png`
- **설명**: 상점에 등록된 모든 상품을 유형별(꾸미기/프로필/인장/이용권/재료/가구/기타)로 조회합니다. 상품 추가/수정 폼으로 이동합니다.

### 6-4. 상품 추가/수정
- **파일**: `shop_item_form.php`
- **스크린샷**: `26_shop_item_form.png`
- **설명**: 상점 상품의 상세 정보(이름, 설명, 이미지, 가격, 유형, 효과, 재고, 구매 제한, 판매 기간)를 등록하거나 수정합니다.

### 6-5. 구매/선물 내역
- **파일**: `shop_log.php`
- **스크린샷**: `27_shop_log.png`
- **설명**: 상점 구매 및 선물 거래 내역을 조회합니다. 거래 유형별 필터링(구매/선물)과 회원/상품명 검색을 지원합니다.

### 6-6. 이모티콘 관리
- **파일**: `emoticon_list.php`
- **스크린샷**: `28_emoticon_list.png`
- **설명**: 이모티콘 셋의 등록/승인 상태를 관리합니다. 관리자 또는 유저가 등록한 이모티콘 셋의 워크플로우(초안→심사→승인/반려)를 처리합니다.
- **의존**: 컨텐츠 설정에서 "이모티콘 기능" 사용 설정 필요.

---

## 7. 개척

### 7-1. 시설 관리
- **파일**: `pioneer_facility.php`
- **스크린샷**: `29_pioneer_facility.png`
- **설명**: 개척 시설(건물)을 관리합니다. 카드 뷰와 거점 맵 뷰를 전환하며, 건설 재료/비용, 게시판 해금 조건을 설정합니다.
- **의존**: 컨텐츠 설정에서 "개척 시스템" 사용 설정 필요. 재료 관리에서 재료 타입을 먼저 등록해야 합니다.

### 7-2. 재료 관리
- **파일**: `pioneer_material.php`
- **스크린샷**: `30_pioneer_material.png`
- **설명**: 개척/파견 시스템에서 사용되는 재료 타입을 관리합니다. 아이콘, 코드, 이름, 설명을 설정하고 유저별 보유 현황을 확인합니다.
- **의존**: 컨텐츠 설정에서 "개척 시스템" 사용 설정 필요.

### 7-3. 파견지 관리
- **파일**: `expedition_area.php`
- **스크린샷**: `31_expedition_area.png`
- **설명**: 파견 시스템의 파견지를 관리합니다. 파견지별 재료 드롭 테이블, 시설 해금 조건, 이벤트 매칭을 설정합니다.
- **의존**: 재료 관리에서 재료 타입 등록 필요. 파견 이벤트를 매칭하려면 이벤트를 먼저 등록해야 합니다.

### 7-4. 파견 이벤트
- **파일**: `expedition_event.php`
- **스크린샷**: `32_expedition_event.png`
- **설명**: 파견 완료 시 확률적으로 발동하는 이벤트를 관리합니다. 보상(포인트/재료)과 패널티(차감/손실) 유형을 설정합니다.
- **의존**: 재료 타입이 등록되어 있어야 재료 관련 이벤트를 설정할 수 있습니다.

### 7-5. 파견 기록
- **파일**: `expedition_log.php`
- **스크린샷**: `33_expedition_log.png`
- **설명**: 유저들의 파견 활동 기록을 조회합니다. 상태(진행중/완료/수령완료/취소), 파견지별 필터링과 보상 내역을 확인합니다.
- **의존**: 파견지가 등록되어 있고 유저가 파견을 실행해야 기록이 생성됩니다.

---

## 설정 순서 권장

새 사이트를 세팅할 때 다음 순서를 권장합니다:

1. **기본 설정** (config.php) → 사이트명, 포인트, 기능 ON/OFF
2. **스태프 관리** (staff.php) → 운영진 역할 배정
3. **디자인 관리** (design.php) → 폰트, 배경, 메인 위젯
4. **프로필 필드** (profile_field.php) → 캐릭터 시트 구성
5. **소속/유형** (side_class.php) → 세력/종족 등록
6. **게시판** (board_list.php) → 게시판 생성
7. **보상** (reward.php) → 게시판별 보상 설정
8. **재료** (pioneer_material.php) → 재료 타입 등록
9. **시설** (pioneer_facility.php) → 개척 시설 등록
10. **파견 이벤트/파견지** → 이벤트 먼저, 파견지에서 매칭
11. **세계관** (위키 → 타임라인 → 지도)
12. **상점** (shop_item_list.php) → 상품 등록
13. **업적** (achievement.php) → 업적 정의
