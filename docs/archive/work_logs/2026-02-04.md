# 작업 로그 - 2026-02-04

## 완료 항목

### 1. 상점 시스템 완성

#### 1.1 뱃지 아이콘 파일 업로드 지원
- `adm/morgan/shop_item_form.php` - 라디오 버튼으로 Heroicons/파일 선택
- `adm/morgan/shop_item_update.php` - 파일 업로드 처리 (`/data/shop/icons/`)
- `plugin/morgan/morgan.php` - `mg_icon()`, `mg_heroicon()` 함수 추가

#### 1.2 프론트엔드 확인
- `bbs/shop.php` - 상점 메인
- `bbs/shop_view.php` - 상품 상세
- `bbs/shop_buy.php` - 구매 처리
- `bbs/inventory.php` - 인벤토리
- `bbs/gift.php` - 선물함
- 모든 스킨 파일 정상 동작 확인

---

### 2. 포인트 관리 기능 추가

#### 2.1 신규 파일
- `adm/morgan/point_manage.php` - 포인트 관리 (3탭 구성)
- `adm/morgan/point_manage_update.php` - 저장/지급 처리

#### 2.2 탭 구성
| 탭 | 기능 |
|---|------|
| 재화 설정 | 재화 명칭/단위 설정 (예: G, 골드, 포인트) |
| 포인트 지급 | 회원 목록 + 인라인 지급/차감 (AJAX) |
| 포인트 내역 | 전체 포인트 로그 조회 |

#### 2.3 헬퍼 함수 추가 (morgan.php)
```php
mg_point_format($point, $with_sign = false);  // "1,000 G"
mg_point_name();  // "G", "골드" 등
```

#### 2.4 재화 명칭 적용
- `shop.skin.php` - 상점 목록
- `view.skin.php` - 상품 상세
- `gift.skin.php` - 선물함
- `tail.php` - 사이드바 포인트 표시

---

### 3. 우측 사이드바 게임 UI 스타일 개선

#### 3.1 변경 전
```
회원 정보
대표 캐릭터 (플레이스홀더)
퀵 메뉴 (텍스트 링크)
```

#### 3.2 변경 후
```
회원 정보 (재화 명칭 적용)
대표 캐릭터 (실제 데이터, mg_get_main_character 사용)
인벤토리 미니 (6칸 그리드, 썸네일)
선물함 미니 (대기 선물 3개 + 빨간 뱃지)
```

#### 3.3 수정 파일
- `theme/morgan/tail.php`
- `plugin/morgan/morgan.php` - `mg_get_inventory()` 페이지네이션 지원 추가
- `plugin/morgan/morgan.php` - `mg_get_pending_gifts()` limit 파라미터 추가

---

### 4. 왼쪽 사이드바 정리

- `theme/morgan/head.php`
- 인벤토리/선물함 아이콘 제거
- 상점 아이콘만 유지 (우측 사이드바에서 접근)

---

### 5. 관리자 메뉴 업데이트

- `adm/admin.menu800.php`
  - 800500: 출석 설정 → 출석 관리 (이름 변경)
  - 800550: 포인트 관리 (신규 추가)

---

## 다음 작업 (2026-02-05 예정)

### 게시판 + 역극 시스템 구현

#### 게시판 스킨 (미구현)
| 스킨 | 용도 |
|------|------|
| gallery | 갤러리형 (로그, 창작물) |
| memo | 메모형 (문의, 오너게시판) |
| postit | 포스트잇형 (앓이란, lino.it 스타일) |

#### 역극 시스템 (전체 미구현)

**DB 테이블**
- `mg_rp_thread` - 역극 (판)
- `mg_rp_reply` - 역극 이음
- `mg_rp_member` - 역극 참여자

**프론트 페이지**
- `rp_list.php` - 역극 목록
- `rp_view.php` - 역극 보기 (채팅 UI)
- `rp_write.php` - 판 세우기
- `rp_reply.php` - 이음 작성 (AJAX)

**관리자**
- 역극 설정 페이지
- 역극 목록/관리

**스킨**
- `theme/morgan/skin/rp/` - 역극 전용 스킨

---

## 참고 문서

- `docs/PLAN_BOARD.md` - 게시판 기획
- `docs/PLAN_SHOP.md` - 상점 기획 (완료)
- `docs/PLAN_POINT.md` - 포인트 기획
- `docs/ROADMAP.md` - 전체 로드맵

---

*작성일: 2026-02-04*
